grammar Wikitext
  rule paragraph
    line+ {
      def to_s
        '<p>' + elements.collect{|e| e.to_s}.join + '</p>'
      end
    }
  end
  
  rule line
    string "\n"? {
      def to_s
        string.to_s
      end
    }
  end
  
  rule string
    plain_char+ {
      def to_s
        ERB::Util::h text_value
      end
    }
  end

  rule plain_char
    [^\n] {
      def to_s
        ERB::Util::h text_value
      end
    }
  end
end